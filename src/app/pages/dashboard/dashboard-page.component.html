<div class="dashboard-container" *ngIf="!loading; else loadingTpl">
  <h1>HR Analytics Dashboard</h1>

  <!-- Quick Stats -->
  <div class="stats-grid">
    <mat-card class="stat-card blue">
      <mat-icon>groups</mat-icon>
      <div>
        <h3>{{ totalEmployees }}</h3>
        <p>Total Employees</p>
      </div>
    </mat-card>

    <mat-card class="stat-card orange">
      <mat-icon>assignment</mat-icon>
      <div>
        <h3>{{ totalApplicants }}</h3>
        <p>Total Applicants</p>
      </div>
    </mat-card>

    <mat-card class="stat-card green">
      <mat-icon>apartment</mat-icon>
      <div>
        <h3>{{ totalDepartments }}</h3>
        <p>Departments</p>
      </div>
    </mat-card>

    <mat-card class="stat-card violet">
      <mat-icon>work</mat-icon>
      <div>
        <h3>{{ activeRoles }}</h3>
        <p>Active Roles</p>
      </div>
    </mat-card>
  </div>

  <!-- Apex Charts -->
  <div class="chart-grid">
    <mat-card class="chart-card">
      <apx-chart
        [series]="applicantsByRole.series || []"
        [chart]="applicantsByRole.chart || { type: 'bar' }"
        [xaxis]="applicantsByRole.xaxis || {}"
        [colors]="applicantsByRole.colors || []"
        [title]="applicantsByRole.title || { text: '' }">
      </apx-chart>
    </mat-card>

    <mat-card class="chart-card">
      <apx-chart
        [series]="applicantsByStatus.series || []"
        [chart]="applicantsByStatus.chart ||  { type: 'bar' }"
        [labels]="applicantsByStatus.labels || []"
        [colors]="applicantsByStatus.colors || []"
        [legend]="applicantsByStatus.legend || {}"
        [title]="applicantsByStatus.title || { text: '' }">
      </apx-chart>
    </mat-card>

    <mat-card class="chart-card wide">
      <apx-chart
        [series]="employeesByDepartment.series || []"
        [chart]="employeesByDepartment.chart || { type: 'bar' }"
        [xaxis]="employeesByDepartment.xaxis || {}"
        [colors]="employeesByDepartment.colors || []"
        [title]="employeesByDepartment.title || { text: '' }">
      </apx-chart>
    </mat-card>
  </div>
</div>

<ng-template #loadingTpl>
  <div class="loading">Loading dashboard data...</div>
</ng-template>
